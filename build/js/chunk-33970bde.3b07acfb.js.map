{"version":3,"sources":["webpack:///./node_modules/@element-plus/icons/es/Edit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/hooks/use-page-modal.ts","webpack:///./src/views/main/system/user/user.vue","webpack:///./src/views/main/system/user/config/search-config.ts","webpack:///./src/views/main/system/user/config/table-config.ts","webpack:///./src/views/main/system/user/config/model.config.ts","webpack:///./src/views/main/system/user/user.vue?a451","webpack:///./src/views/main/system/user/user.vue?d883","webpack:///./src/views/main/system/user/user.vue?8bac","webpack:///./node_modules/@element-plus/icons/es/Delete.js","webpack:///./src/hooks/use-table-page.ts"],"names":["script","name","_hoisted_1","xmlns","viewBox","_hoisted_2","fill","d","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","__file","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","usePageModal","title","newCb","editCb","pageModalRef","handleAdd","dialogOption","visible","handleEdit","class","searchConfig","tableConfig","ref","status","type","scope","row","enable","size","handler","handleDelete","tableHeader","dialogConfig","options","apiName","apiModule","formItems","label","hidden","otherOptions","select","test","labelWidth","formObject","showIndexColumn","showCheckColumn","headerItems","prop","slotName","dateFormat","minWidth","modalConfig","col","rules","required","message","trigger","defaultProps","colLayout","xl","lg","md","sm","xs","realname","password","cellphone","roleId","departmentId","components","Delete","Edit","setup","tablePageRef","sysStore","requestStore","then","deleteUser","id","success","catch","addCallback","Object","keys","forEach","key","item","editCallback","JSON","parse","stringify","__scopeId","useTablePage","refreshTableData","handleSearch"],"mappings":"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","file":"js/chunk-33970bde.3b07acfb.js","sourcesContent":["import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"Edit\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z\"\n}, null, -1);\nconst _hoisted_3 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2,\n    _hoisted_3\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/Edit.vue\";\n\nexport default script;\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import PageModal from '@/components/page-modal'\r\nimport { ref } from 'vue'\r\ntype callback = (item?: any) => void\r\nexport function usePageModal(\r\n  title?: string,\r\n  newCb?: callback,\r\n  editCb?: callback\r\n) {\r\n  const pageModalRef = ref<InstanceType<typeof PageModal>>()\r\n  const handleAdd = () => {\r\n    if (pageModalRef.value?.dialogOption) {\r\n      pageModalRef.value.dialogOption.visible = true\r\n      pageModalRef.value.dialogOption.title = '新增' + title\r\n    }\r\n    newCb && newCb()\r\n  }\r\n  const handleEdit = (...args) => {\r\n    editCb && editCb(...args)\r\n    if (pageModalRef.value?.dialogOption) {\r\n      pageModalRef.value.dialogOption.visible = true\r\n      pageModalRef.value.dialogOption.title = '编辑' + title\r\n    }\r\n  }\r\n  return [pageModalRef, handleAdd, handleEdit]\r\n}\r\n","<template>\r\n  <div class=\"user\">\r\n    <table-page\r\n      :searchConfig=\"searchConfig\"\r\n      :tableConfig=\"tableConfig\"\r\n      ref=\"tablePageRef\"\r\n    >\r\n      <template #status=\"scope\">\r\n        <el-tag :type=\"scope.row.enable ? 'primary' : ''\" size=\"mini\">\r\n          {{ scope.row.enable ? '启用' : '禁用' }}</el-tag\r\n        >\r\n      </template>\r\n      <template #handler=\"scope\">\r\n        <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">\r\n          <el-icon><edit /></el-icon>编辑\r\n        </el-button>\r\n        <el-button size=\"mini\" @click=\"handleDelete(scope.row)\">\r\n          <el-icon>\r\n            <delete />\r\n          </el-icon>\r\n          删除\r\n        </el-button>\r\n      </template>\r\n      <template #tableHeader>\r\n        <el-button type=\"primary\" @click=\"handleAdd\">新建用户</el-button>\r\n      </template>\r\n    </table-page>\r\n    <page-modal ref=\"pageModalRef\" :dialogConfig=\"dialogConfig\"> </page-modal>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\n/*引入config*/\r\nimport searchConfig from './config/search-config'\r\nimport tableConfig from './config/table-config'\r\nimport dialogConfig from './config/model.config'\r\nimport requestStoreList from '@/store/modules/requestStore'\r\nimport { Delete, Edit } from '@element-plus/icons'\r\nimport { message, msgBox } from '@/utils/messagebox'\r\n/*引入hooks*/\r\nimport { usePageModal } from '@/hooks/use-page-modal'\r\nimport { useTablePage } from '@/hooks/use-table-page'\r\nexport default defineComponent({\r\n  name: 'user',\r\n  components: { Delete, Edit },\r\n  setup() {\r\n    const [tablePageRef, refreshTableData] = useTablePage()\r\n    const sysStore = requestStoreList['main/system/user']()\r\n    const handleDelete = async (row) => {\r\n      msgBox(`确认删除用户： ${row.realname}?`)\r\n        .then(async () => {\r\n          await sysStore.deleteUser(row.id)\r\n          message.success('删除成功！')\r\n          // refreshTableData()\r\n        })\r\n        .catch((err) => err)\r\n    }\r\n    const addCallback = () => {\r\n      dialogConfig.apiName = 'addUser'\r\n      Object.keys(dialogConfig.formObject).forEach((key) => {\r\n        dialogConfig.formObject[key] = ''\r\n      })\r\n      dialogConfig.formItems?.forEach((item) => {\r\n        if (item.value === 'password') {\r\n          item.hidden = false\r\n        }\r\n        return item\r\n      })\r\n      // dialogConfig.visible = true\r\n      // dialogConfig.title = '新增用户'\r\n    }\r\n    const editCallback = (item) => {\r\n      dialogConfig.apiName = 'editUser'\r\n      dialogConfig.formObject = JSON.parse(JSON.stringify(item))\r\n      dialogConfig.formItems?.forEach((item) => {\r\n        if (item.value === 'password') {\r\n          item.hidden = true\r\n        }\r\n        return item\r\n      })\r\n      // dialogConfig.visible = true\r\n      // dialogConfig.title = '编辑用户'\r\n    }\r\n    const [pageModalRef, handleAdd, handleEdit] = usePageModal(\r\n      '用户',\r\n      addCallback,\r\n      editCallback\r\n    )\r\n    return {\r\n      tablePageRef,\r\n      pageModalRef,\r\n      searchConfig,\r\n      tableConfig,\r\n      dialogConfig,\r\n      handleAdd,\r\n      handleEdit,\r\n      handleDelete\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.user {\r\n  /* background: #fff; */\r\n  padding: 10px;\r\n}\r\n</style>\r\n","import { ISearchConfig } from '@/types/logic'\r\nconst options: ISearchConfig = {\r\n  apiName: 'getUserList',\r\n  apiModule: 'main/system/user',\r\n  formItems: [\r\n    { label: '用户名', value: 'name', type: 'input', hidden: false },\r\n    { label: '真实姓名', value: 'realname', type: 'input', hidden: false },\r\n    {\r\n      label: '创建时间',\r\n      value: 'createAt',\r\n      type: 'datepicker',\r\n      hidden: false,\r\n      // col: 10,\r\n      otherOptions: {\r\n        type: 'daterange'\r\n      }\r\n    },\r\n    {\r\n      label: '用户状态',\r\n      value: 'status',\r\n      type: 'select',\r\n      hidden: false,\r\n      select: {\r\n        value: '',\r\n        options: [\r\n          { label: '启用', value: '1' },\r\n          { label: '禁用', value: '0' }\r\n        ]\r\n      },\r\n      test: true\r\n    }\r\n  ],\r\n  labelWidth: '100px',\r\n  formObject: {\r\n    // id: '',\r\n    name: ''\r\n    // cellphone: '',\r\n    // realname: '',\r\n    // status: '',\r\n    // createAt: []\r\n  }\r\n}\r\n\r\nexport default options\r\n","import { ITableConfig } from '@/types/logic'\r\nconst options: ITableConfig = {\r\n  title: '用户列表',\r\n  showIndexColumn: false,\r\n  showCheckColumn: true,\r\n  headerItems: [\r\n    { prop: 'name', label: '用户名' },\r\n    { prop: 'realname', label: '真实姓名' },\r\n    { prop: 'cellphone', label: '电话号码' },\r\n    { prop: 'enable', label: '状态', slotName: 'status' },\r\n    { prop: 'createAt', label: '创建时间', dateFormat: true },\r\n    { prop: 'updateAt', label: '更新时间', dateFormat: true },\r\n    { prop: 'id', label: '操作', slotName: 'handler', minWidth: 120 }\r\n  ]\r\n}\r\nexport default options\r\n","import { IDialogConfig } from '@/types/logic'\r\nexport const modalConfig: IDialogConfig = {\r\n  apiModule: 'main/system/user',\r\n  apiName: '',\r\n  size: 'small',\r\n  formItems: [\r\n    {\r\n      label: '用户名',\r\n      value: 'name',\r\n      col: 24,\r\n      type: 'input',\r\n      hidden: false,\r\n      rules: [{ required: true, message: '必填项', trigger: 'blur' }]\r\n    },\r\n    {\r\n      label: '真实姓名',\r\n      value: 'realname',\r\n      col: 24,\r\n      type: 'input',\r\n      hidden: false,\r\n      rules: [{ required: true, message: '必填项', trigger: 'blur' }]\r\n    },\r\n    {\r\n      label: '密码',\r\n      value: 'password',\r\n      col: 24,\r\n      type: 'input',\r\n      hidden: true,\r\n      rules: [{ required: true, message: '必填项', trigger: 'blur' }]\r\n    },\r\n    {\r\n      label: '电话号码',\r\n      value: 'cellphone',\r\n      col: 24,\r\n      type: 'input',\r\n      hidden: false,\r\n      rules: [{ required: true, message: '必填项', trigger: 'blur' }]\r\n    },\r\n    {\r\n      label: '角色',\r\n      value: 'roleId',\r\n      col: 24,\r\n      type: 'select',\r\n      hidden: false,\r\n      select: {\r\n        apiModule: 'main/system/user',\r\n        apiName: 'getRoleList',\r\n        value: '',\r\n        defaultProps: {\r\n          value: 'id',\r\n          label: 'name'\r\n        },\r\n        options: [{ label: 'heelo', value: 'sss' }]\r\n      },\r\n      test: true,\r\n      rules: [\r\n        { required: true, message: '必选项', trigger: ['blur', 'change'] }\r\n      ]\r\n    },\r\n    {\r\n      label: '部门',\r\n      value: 'departmentId',\r\n      col: 24,\r\n      type: 'select',\r\n      hidden: false,\r\n      select: {\r\n        apiModule: 'main/system/user',\r\n        apiName: 'getDeptList',\r\n        value: '',\r\n        defaultProps: {\r\n          value: 'id',\r\n          label: 'name'\r\n        },\r\n        options: [{ label: 'heelo', value: 'sss' }]\r\n      },\r\n      test: true,\r\n      rules: [\r\n        { required: true, message: '必选项', trigger: ['blur', 'change'] }\r\n      ]\r\n    }\r\n  ],\r\n  colLayout: {\r\n    xl: 24,\r\n    lg: 24,\r\n    md: 24,\r\n    sm: 24,\r\n    xs: 24\r\n  },\r\n  formObject: {\r\n    name: '',\r\n    realname: '',\r\n    password: '',\r\n    cellphone: '',\r\n    roleId: '',\r\n    departmentId: ''\r\n  }\r\n}\r\nexport default modalConfig\r\n","\r\nimport { defineComponent } from 'vue'\r\n/*引入config*/\r\nimport searchConfig from './config/search-config'\r\nimport tableConfig from './config/table-config'\r\nimport dialogConfig from './config/model.config'\r\nimport requestStoreList from '@/store/modules/requestStore'\r\nimport { Delete, Edit } from '@element-plus/icons'\r\nimport { message, msgBox } from '@/utils/messagebox'\r\n/*引入hooks*/\r\nimport { usePageModal } from '@/hooks/use-page-modal'\r\nimport { useTablePage } from '@/hooks/use-table-page'\r\nexport default defineComponent({\r\n  name: 'user',\r\n  components: { Delete, Edit },\r\n  setup() {\r\n    const [tablePageRef, refreshTableData] = useTablePage()\r\n    const sysStore = requestStoreList['main/system/user']()\r\n    const handleDelete = async (row) => {\r\n      msgBox(`确认删除用户： ${row.realname}?`)\r\n        .then(async () => {\r\n          await sysStore.deleteUser(row.id)\r\n          message.success('删除成功！')\r\n          // refreshTableData()\r\n        })\r\n        .catch((err) => err)\r\n    }\r\n    const addCallback = () => {\r\n      dialogConfig.apiName = 'addUser'\r\n      Object.keys(dialogConfig.formObject).forEach((key) => {\r\n        dialogConfig.formObject[key] = ''\r\n      })\r\n      dialogConfig.formItems?.forEach((item) => {\r\n        if (item.value === 'password') {\r\n          item.hidden = false\r\n        }\r\n        return item\r\n      })\r\n      // dialogConfig.visible = true\r\n      // dialogConfig.title = '新增用户'\r\n    }\r\n    const editCallback = (item) => {\r\n      dialogConfig.apiName = 'editUser'\r\n      dialogConfig.formObject = JSON.parse(JSON.stringify(item))\r\n      dialogConfig.formItems?.forEach((item) => {\r\n        if (item.value === 'password') {\r\n          item.hidden = true\r\n        }\r\n        return item\r\n      })\r\n      // dialogConfig.visible = true\r\n      // dialogConfig.title = '编辑用户'\r\n    }\r\n    const [pageModalRef, handleAdd, handleEdit] = usePageModal(\r\n      '用户',\r\n      addCallback,\r\n      editCallback\r\n    )\r\n    return {\r\n      tablePageRef,\r\n      pageModalRef,\r\n      searchConfig,\r\n      tableConfig,\r\n      dialogConfig,\r\n      handleAdd,\r\n      handleEdit,\r\n      handleDelete\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./user.vue?vue&type=template&id=0c20b95d&scoped=true\"\nimport script from \"./user.vue?vue&type=script&lang=ts\"\nexport * from \"./user.vue?vue&type=script&lang=ts\"\n\nimport \"./user.vue?vue&type=style&index=0&id=0c20b95d&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0c20b95d\"\n\nexport default script","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./user.vue?vue&type=style&index=0&id=0c20b95d&scoped=true&lang=css\"","import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"Delete\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/Delete.vue\";\n\nexport default script;\n","import { ref } from 'vue'\r\nimport TablePage from '@/components/table-page'\r\nexport function useTablePage() {\r\n  const tablePageRef = ref<InstanceType<typeof TablePage>>()\r\n  const refreshTableData = () => {\r\n    if (tablePageRef.value?.handleSearch) {\r\n      tablePageRef.value?.handleSearch()\r\n    }\r\n  }\r\n  return [tablePageRef, refreshTableData]\r\n}\r\n"],"sourceRoot":""}